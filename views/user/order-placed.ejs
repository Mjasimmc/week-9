<%- include('../layout/header.ejs') %>
  <%- include('../layout/after-login.ejs') %>

    <!--================Order Details Area =================-->
    <section class="order_details section_gap">
      <div class="container mt-5">
        <h3 class="title_confirmation" style="color: rgb(106, 245, 0);">Thank you. Your order has been received.</h3>
        <div class="row order_d_inner" style="color: rgb(0, 0, 0);">
          <div class="col-lg-3 col-md-12">
            <style>
              .styling {
                background-color: rgb(199, 199, 199);
                border-radius: 10px;
                padding: 20px;
              }
            </style>
            <div class="details_item mt-5 styling">
              <h4>Order Info</h4>
              <ul class="list">
                <li><span>Order number</span> : <%= orderDetails._id %></li>
                <li><span>Date</span> : <%= orderDetails.orderdate %></li>
                <li><span>Total</span> : $<%= orderDetails.totalprice %></li>
                <li><span>Payment method</span> : <%= orderDetails.payement %></li>
                <li><span>Payment status</span> : <%= orderDetails.paymentstatus %></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-4 col-md-4">
            <div class="details_item mt-5 styling">
              <h4>Billing Address</h4>
              <ul class="list">
                <li><span>Name</span> : <%= orderDetails.orderaddress.name %></li>
                <li><span>House</span> : <%= orderDetails.orderaddress.house %></li>
                <li><span>City</span> : <%= orderDetails.orderaddress.city %></li>
                <li><span>District</span> : <%= orderDetails.orderaddress.district %></li>
                <li><span>Postcode </span> : <%= orderDetails.orderaddress.post %></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-4 col-md-4">
            <div class="details_item mt-5 styling">
              <h4>Shipping Address</h4>
              <ul class="list">
                <li><span>Name</span> : <%= orderDetails.orderaddress.name %></li>
                <li><span>House</span> : <%= orderDetails.orderaddress.house %></li>
                <li><span>City</span> : <%= orderDetails.orderaddress.city %></li>
                <li><span>District</span> : <%= orderDetails.orderaddress.district %></li>
                <li><span>Postcode </span> : <%= orderDetails.orderaddress.post %></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="order_details_table">
          <h2>Order Details</h2>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col">Product</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Total</th>
                </tr>
              </thead>
              <tbody>

                <% let totalPrice=0 %>
                  <% orderDetails.products.forEach((element)=> { %>
                    <tr>
                      <td>
                        <img src="/ProductImages/<%= element.product.image[0] %>" width="35px" alt="">
                      </td>
                      <td>
                        <p>
                          <%= element.product.name %>
                        </p>
                      </td>
                      <td>
                        <h5>x <%= element.quantity %>
                        </h5>
                      </td>
                      <td>
                        <p>$<%= element.quantity*element.product.price %>
                        </p>
                        <% totalPrice +=element.quantity*element.product.price %>
                      </td>
                    </tr>
                    <% }) %>

                      <tr>
                        <td>
                          <h4>Subtotal</h4>
                        </td>
                        <td>
                          <h5></h5>
                        </td>
                        <td>
                          <p><%= "$"+totalPrice %>
                          </p>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <h4>Shipping</h4>
                        </td>
                        <td>
                          <h5></h5>
                        </td>
                        <td>
                          <p>Flat rate: $50.00</p>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <h4>Total</h4>
                        </td>
                        <td>
                          <h5></h5>
                        </td>
                        <td>
                          <p><%= "$"+(totalPrice+50) %></p>
                        </td>
                      </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <%- include('../layout/footer.ejs') %>